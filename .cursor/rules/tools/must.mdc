---
description: 最小必遵守硬性规则
globs: []
alwaysApply: true
---
最近更新: 2025-11-30

# 基本合规规则

> 这是所有项目必须遵循的最小合规规则集，确保基本质量底线。

## 0. 核心职责

- **必须使用中文简体**回答用户问题
- 你的核心职责是生成高质量代码、优化性能、并主动协助排查与解决技术问题
- 每个功能修改完成后，都要检查一下修改是否正确，并更新相关文档

## 1. 输出规范

### 1.1 语言要求
- 技术术语可保持英文，但解释必须用英文
- 代码注释使用英文，变量名可用英文，源码中不要用特殊字符
- 若需绘图统一使用 Mermaid

### 1.2 代码输出要求
- 生成的代码必须能够直接运行
- 包含必要的导入语句和依赖
- 提供清晰的使用示例
- 代码内仅在必要处加注释，注释风格遵循目标语言的标准文档注释（Javadoc / XML Doc / Docstring 等）

### 1.3 执行环境要求
- **命令行工具**：操作台命令默认使用 PowerShell，无法使用 PowerShell 则使用 CMD
- **中文处理**：涉及中文字符处理时，默认使用 Python 脚本（UTF-8 编码），避免 PowerShell/CMD 编码乱码问题
- 生成的脚本应考虑跨平台兼容性（Windows/Linux/macOS）
- 涉及系统命令时需说明运行环境要求

## 2. 质量保障

### 2.1 日志规范

#### 2.1.1 必要日志
- **错误日志**: 所有异常必须记录
- **关键操作日志**: 重要业务操作必须记录
- **性能日志**: 关键路径的耗时记录

#### 2.1.2 日志格式
```
[时间] [级别] [模块] 消息内容
```

### 2.2 注释规范

#### 2.2.1 必要注释
- 复杂业务逻辑必须有注释说明
- 公共接口必须有文档注释
- 重要配置项必须有说明

#### 2.2.2 注释质量
- 说明"为什么"而不是"是什么"
- 保持注释与代码同步
- 避免无意义的注释

### 2.3 自检清单

#### 2.3.1 代码提交前检查
- [ ] 代码能够编译通过
- [ ] 核心功能已测试
- [ ] 错误处理已实现
- [ ] 必要日志已添加
- [ ] 关键注释已编写

#### 2.3.2 文档检查
- [ ] README 文件已更新
- [ ] API 文档已更新
- [ ] 配置说明已完善

#### 2.3.3 功能修改后检查
- [ ] 修改是否正确实现
- [ ] 相关文档已更新
- [ ] 边界情况已考虑
- [ ] 异常处理已覆盖

## 3. 安全基线

### 3.1 输入验证
- 所有外部输入必须验证
- 防止 SQL 注入
- 防止 XSS 攻击

### 3.2 敏感信息
- 不在代码中硬编码密码
- 不在日志中输出敏感信息
- 使用环境变量管理配置

## 4. 性能基线

### 4.1 响应时间
- 接口响应时间 < 2秒
- 数据库查询 < 1秒
- 页面加载时间 < 3秒

### 4.2 资源使用
- 避免内存泄漏
- 合理使用缓存
- 优化数据库查询

## 5. 工作流程要求

### 5.1 输出前自检
- [ ] 需求覆盖完整
- [ ] 命名一致性
- [ ] 边界/异常处理
- [ ] 可读性与可维护性

### 5.2 假设管理
- 任何假设需显式列入"待确认"
- 提交前逐项闭环所有待确认项

### 5.3 快速合规模板
```
TL;DR | 需求覆盖 | 方案摘要 | 关键变更 | 已完成 | 待确认 | 风险与后续
```

## 6. 禁止事项

- ❌ 不输出与任务无关的大段模板
- ❌ 不在文档中输出大段代码
- ❌ 不臆造无法验证的外部敏感信息
- ❌ 未澄清前不一次性倾倒巨大成品代码（应先小步确认）
- ❌ 不在日志/输出中泄露敏感信息（密码/密钥/Token/个人隐私）
- ❌ 复制第三方代码而未注明来源与许可
- ❌ **不主动创建说明文档或文档文件**（README.md、设计文档、使用说明、架构说明等），除非用户明确要求"编写文档"、"生成 README"、"写说明文档"
- ❌ 不输出与代码无关的说明性文档

## 7. 规范引用

- 统一编码规范：参照 `coding-standards.mdc`
- 测试相关：参照 `testing.mdc`
- 安全相关：参照 `security.mdc`
- 可观测性：参照 `observability.mdc`

---
**重要**: 这些规则是底线要求，任何项目都不得违反。
